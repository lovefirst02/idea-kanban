<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>💡 Idea Kanban Board</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <header>
    <h1>💡 Idea Kanban Board</h1>
    <div class="header-actions">
      <input type="text" id="search" placeholder="🔍 搜尋點子...">
      <select id="filter-priority">
        <option value="">所有優先級</option>
        <option value="High">🔴 High</option>
        <option value="Medium">🟡 Medium</option>
        <option value="Low">🟢 Low</option>
      </select>
      <button id="btn-new" class="btn-primary">+ 新增點子</button>
      <button id="btn-settings" class="btn-icon" title="設定">⚙️</button>
    </div>
  </header>

  <main class="kanban-board">
    <div class="kanban-column" data-status="📝 待審核">
      <div class="column-header">
        <span class="column-icon">📝</span>
        <span class="column-title">待審核</span>
        <span class="column-count">0</span>
      </div>
      <div class="column-cards" id="col-pending"></div>
    </div>

    <div class="kanban-column" data-status="✅ 已批准">
      <div class="column-header">
        <span class="column-icon">✅</span>
        <span class="column-title">已批准</span>
        <span class="column-count">0</span>
      </div>
      <div class="column-cards" id="col-approved"></div>
    </div>

    <div class="kanban-column" data-status="🚧 開發中">
      <div class="column-header">
        <span class="column-icon">🚧</span>
        <span class="column-title">開發中</span>
        <span class="column-count">0</span>
      </div>
      <div class="column-cards" id="col-inprogress"></div>
    </div>

    <div class="kanban-column" data-status="✅ 已完成">
      <div class="column-header">
        <span class="column-icon">🎉</span>
        <span class="column-title">已完成</span>
        <span class="column-count">0</span>
      </div>
      <div class="column-cards" id="col-done"></div>
    </div>
  </main>

  <!-- Modal for editing -->
  <div id="modal" class="modal hidden">
    <div class="modal-content">
      <div class="modal-header">
        <h2 id="modal-title">新增點子</h2>
        <button class="btn-close" id="btn-close">&times;</button>
      </div>
      <form id="idea-form">
        <div class="form-group">
          <label for="name">名稱 *</label>
          <input type="text" id="name" name="name" required>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="status">狀態</label>
            <select id="status" name="status">
              <option value="📝 待審核">📝 待審核</option>
              <option value="✅ 已批准">✅ 已批准</option>
              <option value="🚧 開發中">🚧 開發中</option>
              <option value="✅ 已完成">✅ 已完成</option>
            </select>
          </div>
          <div class="form-group">
            <label for="priority">優先級</label>
            <select id="priority" name="priority">
              <option value="Low">🟢 Low</option>
              <option value="Medium" selected>🟡 Medium</option>
              <option value="High">🔴 High</option>
            </select>
          </div>
        </div>
        <div class="form-row">
          <div class="form-group">
            <label for="assignee">負責 Agent</label>
            <input type="text" id="assignee" name="assignee" placeholder="例: Coding Agent">
          </div>
          <div class="form-group">
            <label for="progress">進度 (%)</label>
            <input type="number" id="progress" name="progress" min="0" max="100" value="0">
          </div>
        </div>
        <div class="form-group">
          <label for="github">GitHub 連結</label>
          <input type="url" id="github" name="github" placeholder="https://github.com/...">
        </div>
        <div class="form-group">
          <label for="description">描述</label>
          <textarea id="description" name="description" rows="4"></textarea>
        </div>
        <div class="form-actions">
          <button type="button" id="btn-delete" class="btn-danger hidden">刪除</button>
          <div class="spacer"></div>
          <button type="button" id="btn-cancel" class="btn-secondary">取消</button>
          <button type="submit" class="btn-primary">儲存</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Settings Modal -->
  <div id="settings-modal" class="modal hidden">
    <div class="modal-content modal-small">
      <div class="modal-header">
        <h2>⚙️ 設定</h2>
        <button class="btn-close" id="btn-settings-close">&times;</button>
      </div>
      <form id="settings-form">
        <div class="form-group">
          <label for="webhook-url">Discord Webhook URL</label>
          <input type="url" id="webhook-url" name="webhookUrl" placeholder="https://discord.com/api/webhooks/...">
          <small class="form-hint">設定後，看板變更將自動通知到 Discord 頻道</small>
        </div>
        <div id="webhook-status" class="webhook-status"></div>
        <div class="form-actions">
          <button type="button" id="btn-settings-cancel" class="btn-secondary">取消</button>
          <button type="submit" class="btn-primary">儲存</button>
        </div>
      </form>
    </div>
  </div>

  <script src="app.js"></script>
</body>
</html>
